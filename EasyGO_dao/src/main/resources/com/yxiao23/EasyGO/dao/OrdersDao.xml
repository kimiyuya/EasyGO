<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.4//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yxiao23.EasyGO.dao.OrdersDao">


    <resultMap id="orders" type="Orders">
        <id property="orderId" column="order_id" javaType="String"/>
        <result property="renterName" column="renter_name" javaType="String"/>
        <result property="renterPhone" column="renter_phone" javaType="String"/>
        <result property="userId" column="user_id" javaType="String"/>
        <result property="agencyId" column="agency_id" javaType="String"/>
        <result property="carId" column="car_id" javaType="String"/>
        <result property="totalPrice" column="total_price" javaType="double"/>
        <result property="createTime" column="create_time" javaType="Date"/>
        <result property="orderStatus" column="order_status" javaType="String"/>
        <result property="checkNum" column="check_num" javaType="String"/>
        <result property="pickupTime" column="pickup_time" javaType="Date"/>
        <result property="returnTime" column="return_time" javaType="Date"/>

    </resultMap>


    <insert id="insert" parameterType="Orders">
        insert into orders values(#{orderId},#{renterName},#{renterPhone},#{userId},#{agencyId}
        ,#{carId},#{totalPrice},#{createTime},#{orderStatus},#{checkNum},#{pickupTime},#{returnTime})
    </insert>

    <update id="update" parameterType="Orders">
        update orders set renter_name=#{renterName},renter_phone=#{renterPhone},user_id=#{userId},agency_id=#{agencyId},
        car_id=#{carId},total_price=#{totalPrice},create_time=#{createTime},order_status=#{orderStatus},check_num=#{checkNum},
        pickup_time=#{pickupTime},return_time=#{returnTime}
        where order_id=#{orderId}
    </update>

    <delete id="delete" parameterType="String">
        delete from orders where order_id=#{orderId}
    </delete>

    <select id="select" parameterType="String" resultMap="orders">
        select * from orders where order_id=#{orderId}
    </select>

    <select id="selectAll" resultMap="orders">
        select * from orders
    </select>

    <select id="getOrderByUserId" parameterType="String" resultMap="orders">
        select * from orders where user_id=#{userId}
    </select>

    <select id="getTransaction" resultMap="orders">
        SELECT count(create_time) as soldAmount, create_time from orders group by create_time
    </select>

</mapper>